<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProVerify Certificados</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'blue-25': '#f8fafc',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
        .lucide {
            width: 1em;
            height: 1em;
            display: inline-block;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Iconos SVG simplificados
        const FileTextIcon = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                <polyline points="14,2 14,8 20,8" />
                <line x1="16" y1="13" x2="8" y2="13" />
                <line x1="16" y1="17" x2="8" y2="17" />
                <polyline points="10,9 9,9 8,9" />
            </svg>
        );

        const EyeIcon = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
            </svg>
        );

        const DownloadIcon = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7,10 12,15 17,10" />
                <line x1="12" y1="15" x2="12" y2="3" />
            </svg>
        );

        const PlusIcon = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 5v14m-7-7h14" />
            </svg>
        );

        const Trash2Icon = () => (
            <svg className="lucide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c0-1 1-2 2-2v2" />
                <line x1="10" y1="11" x2="10" y2="17" />
                <line x1="14" y1="11" x2="14" y2="17" />
            </svg>
        );

        // Componente Badge
        function Badge({ children, variant = "default", className = "" }) {
            const variants = {
                default: "bg-blue-100 text-blue-800 border-blue-200",
                secondary: "bg-gray-100 text-gray-800 border-gray-200",
                destructive: "bg-red-100 text-red-800 border-red-200",
                outline: "border-gray-200 text-gray-700"
            };

            return (
                <span className={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors ${variants[variant]} ${className}`}>
                    {children}
                </span>
            );
        }

        // Función de generación de PDF completa
        function generatePDF(personaData, causas) {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF("p", "mm", "a4");
            const pageWidth = 210;
            const pageHeight = 297;
            const margin = 20;
            const contentWidth = pageWidth - margin * 2;

            // Colores exactos
            const primaryBlue = [37, 99, 235];
            const darkBlue = [30, 58, 138];
            const lightBlue = [239, 246, 255];
            const darkGray = [31, 41, 55];
            const mediumGray = [107, 114, 128];
            const borderGray = [209, 213, 219];

            // Función para truncar texto
            const truncateText = (text, maxWidth, fontSize) => {
                pdf.setFontSize(fontSize);
                const textWidth = pdf.getTextWidth(text);
                if (textWidth <= maxWidth) return text;

                let truncated = text;
                while (pdf.getTextWidth(truncated + "...") > maxWidth && truncated.length > 0) {
                    truncated = truncated.slice(0, -1);
                }
                return truncated + "...";
            };

            // Función para justificar texto
            const addJustifiedText = (text, x, y, maxWidth, fontSize, lineHeight = 4) => {
                pdf.setFontSize(fontSize);
                const words = text.split(" ");
                let currentLine = "";
                let currentY = y;

                for (let i = 0; i < words.length; i++) {
                    const testLine = currentLine + (currentLine ? " " : "") + words[i];
                    const testWidth = pdf.getTextWidth(testLine);

                    if (testWidth > maxWidth && currentLine) {
                        if (i < words.length - 1) {
                            const lineWords = currentLine.split(" ");
                            if (lineWords.length > 1) {
                                const totalSpaces = lineWords.length - 1;
                                const extraSpace = (maxWidth - pdf.getTextWidth(currentLine.replace(/ /g, ""))) / totalSpaces;
                                let currentX = x;

                                for (let j = 0; j < lineWords.length; j++) {
                                    pdf.text(lineWords[j], currentX, currentY);
                                    if (j < lineWords.length - 1) {
                                        currentX += pdf.getTextWidth(lineWords[j]) + extraSpace;
                                    }
                                }
                            } else {
                                pdf.text(currentLine, x, currentY);
                            }
                        } else {
                            pdf.text(currentLine, x, currentY);
                        }

                        currentLine = words[i];
                        currentY += lineHeight;
                    } else {
                        currentLine = testLine;
                    }
                }

                if (currentLine) {
                    pdf.text(currentLine, x, currentY);
                    currentY += lineHeight;
                }

                return currentY;
            };

            let yPos = 20;

            // Header optimizado
            pdf.setFillColor(...darkBlue);
            pdf.rect(0, 0, pageWidth, 22, "F");

            pdf.setTextColor(255, 255, 255);
            pdf.setFontSize(12);
            pdf.setFont("helvetica", "bold");
            pdf.text("Pro", margin, 15);

            pdf.setFillColor(249, 115, 22);
            pdf.circle(30, 12, 2, "F");

            pdf.setTextColor(255, 255, 255);
            pdf.text("erify", 34, 15);

            pdf.setFontSize(10);
            pdf.setFont("helvetica", "normal");
            pdf.text("Certificado de Litigios", pageWidth - margin, 11, { align: "right" });
            pdf.setFontSize(8);
            pdf.text("Documento Oficial", pageWidth - margin, 17, { align: "right" });

            yPos = 35;

            // Datos personales
            pdf.setTextColor(...darkGray);
            pdf.setFontSize(14);
            pdf.setFont("helvetica", "bold");
            pdf.text("Datos del Solicitante", margin, yPos);

            yPos += 10;

            const dataWidth = contentWidth * 0.65;
            const riskIndicatorSpace = contentWidth * 0.35;

            pdf.setFontSize(10);
            const lineSpacing = 7;

            // Datos personales
            pdf.setFont("helvetica", "bold");
            pdf.text("Nombre:", margin, yPos);
            pdf.setFont("helvetica", "normal");
            const nombreTruncated = truncateText(personaData.nombre, dataWidth - 35, 10);
            pdf.text(nombreTruncated, margin + 35, yPos);

            yPos += lineSpacing;
            pdf.setFont("helvetica", "bold");
            pdf.text("RUT:", margin, yPos);
            pdf.setFont("helvetica", "normal");
            pdf.text(personaData.rut, margin + 35, yPos);

            yPos += lineSpacing;
            pdf.setFont("helvetica", "bold");
            pdf.text("Edad:", margin, yPos);
            pdf.setFont("helvetica", "normal");
            pdf.text(personaData.edad, margin + 35, yPos);

            yPos += lineSpacing;
            pdf.setFont("helvetica", "bold");
            pdf.text("Fecha de emisión:", margin, yPos);
            pdf.setFont("helvetica", "normal");
            pdf.text(personaData.fecha, margin + 55, yPos);

            // Indicador de Riesgo
            const riskValue = parseInt(personaData.indicadorRiesgo);
            let riskText = "BAJO RIESGO";

            if (riskValue > 500) {
                riskText = "RIESGO MEDIO";
            }
            if (riskValue > 800) {
                riskText = "ALTO RIESGO";
            }

            const centerX = pageWidth - margin - riskIndicatorSpace / 2;
            const centerY = yPos - 15;

            pdf.setFillColor(239, 246, 255);
            pdf.setDrawColor(191, 219, 254);
            pdf.setLineWidth(0.5);
            pdf.roundedRect(centerX - 22, centerY - 15, 44, 30, 15, 15, "FD");

            pdf.setTextColor(29, 78, 216);
            pdf.setFontSize(6);
            pdf.setFont("helvetica", "bold");
            pdf.text("INDICADOR DE RIESGO", centerX, centerY - 5, { align: "center" });

            pdf.setFontSize(20);
            pdf.text(personaData.indicadorRiesgo, centerX, centerY + 2, { align: "center" });

            pdf.setFontSize(5);
            pdf.text(riskText, centerX, centerY + 8, { align: "center" });

            yPos += 15;

            // Sección Litigios
            const litigiosHeight = 35;
            pdf.setFillColor(...lightBlue);
            pdf.roundedRect(margin, yPos, contentWidth, litigiosHeight, 4, 4, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(12);
            pdf.setFont("helvetica", "bold");
            pdf.text("Litigios", margin + 5, yPos + 10);

            pdf.setFontSize(9);
            pdf.setTextColor(...primaryBlue);
            pdf.text(`Se observaron un total de ${causas.length} causas.`, pageWidth - margin - 5, yPos + 10, { align: "right" });

            // Estadísticas
            const activos = causas.filter((c) => c.estado === "Activo").length;
            const concluidos = causas.filter((c) => c.estado === "Concluido").length;
            const fallidos = causas.filter((c) => c.estado === "Fallido").length;

            const statsY = yPos + 18;
            const statWidth = (contentWidth - 40) / 4;
            const statHeight = 15;
            const statSpacing = 5;

            const stats = [
                { value: causas.length, label: "Total", color: primaryBlue },
                { value: activos, label: "Activos", color: [22, 163, 74] },
                { value: concluidos, label: "Concluidos", color: mediumGray },
                { value: fallidos, label: "Fallidos", color: [220, 38, 38] },
            ];

            stats.forEach((stat, index) => {
                const statX = margin + 5 + index * (statWidth + statSpacing);

                pdf.setFillColor(255, 255, 255);
                pdf.setDrawColor(191, 219, 254);
                pdf.setLineWidth(0.5);
                pdf.roundedRect(statX, statsY, statWidth, statHeight, 3, 3, "FD");

                pdf.setTextColor(...stat.color);
                pdf.setFontSize(12);
                pdf.setFont("helvetica", "bold");
                pdf.text(stat.value.toString(), statX + statWidth / 2, statsY + 8, { align: "center" });

                pdf.setFontSize(6);
                pdf.setFont("helvetica", "normal");
                pdf.text(stat.label, statX + statWidth / 2, statsY + 12, { align: "center" });
            });

            yPos += litigiosHeight + 10;

            // Tablas
            const rowHeight = 8;
            const headerHeight = 8;
            const tableSpacing = 10;
            const table1Height = headerHeight + causas.length * rowHeight;
            const table2Height = headerHeight + causas.length * rowHeight;
            const totalTablesHeight = table1Height + table2Height + tableSpacing + 40;

            // Sección Detalle
            pdf.setFillColor(...lightBlue);
            pdf.roundedRect(margin, yPos, contentWidth, totalTablesHeight, 4, 4, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(12);
            pdf.setFont("helvetica", "bold");
            pdf.text("Detalle", margin + 5, yPos + 10);

            yPos += 18;

            // Primera tabla
            const table1Width = contentWidth - 10;
            pdf.setFillColor(255, 255, 255);
            pdf.setDrawColor(...borderGray);
            pdf.setLineWidth(0.5);
            pdf.roundedRect(margin + 5, yPos, table1Width, table1Height, 3, 3, "FD");

            // Headers primera tabla
            pdf.setFillColor(219, 234, 254);
            pdf.rect(margin + 5, yPos, table1Width, headerHeight, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(8);
            pdf.setFont("helvetica", "bold");

            const headers1 = ["ID", "Tipo", "Estado", "Inicio del Procedimiento", "Tribunal"];
            const colWidths1 = [
                table1Width * 0.08,
                table1Width * 0.12,
                table1Width * 0.15,
                table1Width * 0.25,
                table1Width * 0.4,
            ];

            let xPos = margin + 5;
            headers1.forEach((header, i) => {
                pdf.text(header, xPos + 2, yPos + 5);
                xPos += colWidths1[i];
            });

            yPos += headerHeight;

            // Filas primera tabla
            causas.forEach((causa, index) => {
                if (index % 2 === 0) {
                    pdf.setFillColor(248, 250, 252);
                    pdf.rect(margin + 5, yPos, table1Width, rowHeight, "F");
                }

                xPos = margin + 5;
                pdf.setTextColor(...darkGray);
                pdf.setFontSize(7);
                pdf.setFont("helvetica", "normal");

                const rowData1 = [
                    causa.id.toString(),
                    truncateText(causa.tipo, colWidths1[1] - 4, 7),
                    causa.estado,
                    truncateText(causa.inicio, colWidths1[3] - 4, 7),
                    truncateText(causa.tribunal, colWidths1[4] - 4, 7),
                ];

                rowData1.forEach((data, i) => {
                    if (i === 2) {
                        if (causa.estado === "Activo") pdf.setTextColor(22, 163, 74);
                        else if (causa.estado === "Fallido") pdf.setTextColor(220, 38, 38);
                        else pdf.setTextColor(...mediumGray);
                    } else {
                        pdf.setTextColor(...darkGray);
                    }

                    pdf.text(data, xPos + 2, yPos + 5);
                    xPos += colWidths1[i];
                });

                yPos += rowHeight;
            });

            yPos += tableSpacing;

            // Segunda tabla
            const table2Width = contentWidth - 10;
            pdf.setFillColor(255, 255, 255);
            pdf.roundedRect(margin + 5, yPos, table2Width, table2Height, 3, 3, "FD");

            // Headers segunda tabla
            pdf.setFillColor(219, 234, 254);
            pdf.rect(margin + 5, yPos, table2Width, headerHeight, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(8);
            pdf.setFont("helvetica", "bold");

            const headers2 = ["ID", "Materia", "Demandado", "Segundo Demandado", "Cuantía"];
            const colWidths2 = [
                table2Width * 0.08,
                table2Width * 0.25,
                table2Width * 0.25,
                table2Width * 0.25,
                table2Width * 0.17,
            ];

            xPos = margin + 5;
            headers2.forEach((header, i) => {
                pdf.text(header, xPos + 2, yPos + 5);
                xPos += colWidths2[i];
            });

            yPos += headerHeight;

            // Filas segunda tabla
            causas.forEach((causa, index) => {
                if (index % 2 === 0) {
                    pdf.setFillColor(248, 250, 252);
                    pdf.rect(margin + 5, yPos, table2Width, rowHeight, "F");
                }

                xPos = margin + 5;
                pdf.setTextColor(...darkGray);
                pdf.setFontSize(7);
                pdf.setFont("helvetica", "normal");

                const rowData2 = [
                    causa.id.toString(),
                    truncateText(causa.materia, colWidths2[1] - 4, 7),
                    truncateText(causa.demandado, colWidths2[2] - 4, 7),
                    truncateText(causa.segundoDemandado, colWidths2[3] - 4, 7),
                    causa.cuantia,
                ];

                rowData2.forEach((data, i) => {
                    if (i === 4) {
                        if (causa.cuantia === "Alta") pdf.setTextColor(220, 38, 38);
                        else if (causa.cuantia === "Media") pdf.setTextColor(...primaryBlue);
                        else pdf.setTextColor(...mediumGray);
                    } else {
                        pdf.setTextColor(...darkGray);
                    }

                    pdf.text(data, xPos + 2, yPos + 5);
                    xPos += colWidths2[i];
                });

                yPos += rowHeight;
            });

            // SEGUNDA PÁGINA
            pdf.addPage();

            // Header segunda página
            pdf.setFillColor(...darkBlue);
            pdf.rect(0, 0, pageWidth, 18, "F");

            pdf.setTextColor(255, 255, 255);
            pdf.setFontSize(10);
            pdf.setFont("helvetica", "bold");
            pdf.text("Pro", margin, 12);

            pdf.setFillColor(249, 115, 22);
            pdf.circle(27, 10, 1.5, "F");

            pdf.setTextColor(255, 255, 255);
            pdf.text("erify", 30, 12);

            pdf.setFontSize(8);
            pdf.text("Página 2", pageWidth - margin, 12, { align: "right" });

            yPos = 30;

            // Tercera tabla
            const table3Height = headerHeight + causas.length * rowHeight;
            pdf.setFillColor(...lightBlue);
            pdf.roundedRect(margin, yPos, contentWidth, table3Height + 20, 4, 4, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(12);
            pdf.setFont("helvetica", "bold");
            pdf.text("Detalle de Relaciones Laborales", margin + 10, yPos + 12);

            yPos += 18;

            const table3Width = contentWidth - 10;
            pdf.setFillColor(255, 255, 255);
            pdf.roundedRect(margin + 5, yPos, table3Width, table3Height, 3, 3, "FD");

            // Headers tercera tabla
            pdf.setFillColor(219, 234, 254);
            pdf.rect(margin + 5, yPos, table3Width, headerHeight, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(8);
            pdf.setFont("helvetica", "bold");

            const headers3 = ["ID", "ROL", "Inicio/Termino de Relación Laboral", "Fallo"];
            const colWidths3 = [
                table3Width * 0.08,
                table3Width * 0.22,
                table3Width * 0.45,
                table3Width * 0.25,
            ];

            xPos = margin + 5;
            headers3.forEach((header, i) => {
                pdf.text(header, xPos + 2, yPos + 5);
                xPos += colWidths3[i];
            });

            yPos += headerHeight;

            // Filas tercera tabla
            causas.forEach((causa, index) => {
                if (index % 2 === 0) {
                    pdf.setFillColor(248, 250, 252);
                    pdf.rect(margin + 5, yPos, table3Width, rowHeight, "F");
                }

                xPos = margin + 5;
                pdf.setTextColor(...darkGray);
                pdf.setFontSize(7);
                pdf.setFont("helvetica", "normal");

                const rowData3 = [
                    causa.id.toString(),
                    truncateText(causa.rol, colWidths3[1] - 4, 7),
                    truncateText(causa.relacionLaboral, colWidths3[2] - 4, 7),
                    causa.fallo,
                ];

                rowData3.forEach((data, i) => {
                    if (i === 3) {
                        if (causa.fallo === "Acogida") pdf.setTextColor(...primaryBlue);
                        else pdf.setTextColor(...mediumGray);
                    } else {
                        pdf.setTextColor(...darkGray);
                    }

                    pdf.text(data, xPos + 2, yPos + 5);
                    xPos += colWidths3[i];
                });

                yPos += rowHeight;
            });

            yPos += 25;

            // Leyenda
            const legendHeight = 95;
            pdf.setFillColor(...lightBlue);
            pdf.roundedRect(margin, yPos, contentWidth, legendHeight, 4, 4, "F");

            pdf.setTextColor(30, 64, 175);
            pdf.setFontSize(12);
            pdf.setFont("helvetica", "bold");
            pdf.text("Descripción y Leyenda", margin + 10, yPos + 12);

            yPos += 18;

            const whiteContainerHeight = legendHeight - 25;
            pdf.setFillColor(255, 255, 255);
            pdf.roundedRect(margin + 5, yPos, contentWidth - 10, whiteContainerHeight, 3, 3, "F");

            pdf.setTextColor(...darkGray);
            pdf.setFontSize(10);
            pdf.setFont("helvetica", "bold");
            pdf.text("Leyenda:", margin + 15, yPos + 12);

            yPos += 16;

            const baseLineX = margin + 15;
            pdf.setFontSize(8);

            // Contenido de leyenda alineado
            pdf.setFont("helvetica", "bold");
            pdf.text("ID:", baseLineX, yPos);
            pdf.setFont("helvetica", "normal");
            yPos = addJustifiedText(
                "Número de identificación de cada causa, correlativo a las demás tablas.",
                baseLineX + 15,
                yPos,
                contentWidth - 50,
                8,
                4,
            );
            yPos += 2;

            pdf.setFont("helvetica", "bold");
            pdf.text("Estado:", baseLineX, yPos);
            pdf.setFont("helvetica", "normal");
            yPos = addJustifiedText(
                "Representa el estado de tramitación de la causa.",
                baseLineX + 30,
                yPos,
                contentWidth - 65,
                8,
                4,
            );
            yPos += 2;

            pdf.setFont("helvetica", "bold");
            pdf.text("Fallido:", baseLineX, yPos);
            pdf.setFont("helvetica", "normal");
            yPos = addJustifiedText(
                "Representa un termino distinto a una sentencia definitiva, transacción, conciliación o avenimiento.",
                baseLineX + 30,
                yPos,
                contentWidth - 65,
                8,
                4,
            );
            yPos += 2;

            pdf.setFont("helvetica", "bold");
            pdf.text("Clasificación de Cuantía:", baseLineX, yPos);
            pdf.setFont("helvetica", "normal");
            yPos = addJustifiedText(
                "Determinación de lo solicitado por postulante en base a escala propia creada por 'ProVerify'.",
                baseLineX + 75,
                yPos,
                contentWidth - 110,
                8,
                4,
            );
            yPos += 4;

            // Círculos de colores
            const cuantiaItems = [
                { color: [34, 197, 94], label: "Baja Cuantía:", desc: "En un rango de $0 a $5.000.000" },
                { color: [234, 179, 8], label: "Media Cuantía:", desc: "En un rango de $5.000.000 a $15.000.001" },
                { color: [239, 68, 68], label: "Cuantía Alta:", desc: "Sobre los $15.000.001" },
            ];

            cuantiaItems.forEach((item) => {
                pdf.setFillColor(...item.color);
                pdf.circle(baseLineX + 3, yPos, 1.5, "F");

                pdf.setTextColor(...darkGray);
                pdf.setFont("helvetica", "bold");
                pdf.text(item.label, baseLineX + 8, yPos + 1);

                pdf.setFont("helvetica", "normal");
                pdf.text(item.desc, baseLineX + 8 + pdf.getTextWidth(item.label) + 3, yPos + 1);

                yPos += 6;
            });

            // Disclaimer
            const footerY = pageHeight - 35;
            pdf.setFillColor(243, 244, 246);
            pdf.roundedRect(margin, footerY, contentWidth, 28, 4, 4, "F");

            pdf.setTextColor(75, 85, 99);
            pdf.setFontSize(8);
            pdf.setFont("helvetica", "normal");

            const disclaimers = [
                "El presente certificado no contiene información respecto de aquellas causas que se encuentran reservadas de acuerdo con el Acta N°44-2022 de la Corte Suprema y Ley 20.866.",
                "El presente certificado solo contiene información respecto de aquellas causas visibles en la oficina judicial virtual.",
            ];

            let disclaimerY = footerY + 6;
            disclaimers.forEach((disclaimer) => {
                disclaimerY = addJustifiedText(disclaimer, margin + 5, disclaimerY, contentWidth - 10, 8, 4);
                disclaimerY += 2;
            });

            pdf.setFontSize(6);
            pdf.setTextColor(107, 114, 128);
            pdf.text("ProVerify Certificados | Documento generado automáticamente", pageWidth / 2, footerY + 24, {
                align: "center",
            });

            // Guardar el PDF
            const fileName = `Certificado_Litigios_${personaData.rut.replace(/\./g, "").replace("-", "")}_${new Date().toISOString().split("T")[0]}.pdf`;
            pdf.save(fileName);
        }

        // Componente de Vista Previa
        function CertificatePreview({ personaData, causas }) {
            const riskValue = parseInt(personaData.indicadorRiesgo);
            let riskText = "BAJO RIESGO";

            if (riskValue > 500) {
                riskText = "RIESGO MEDIO";
            }
            if (riskValue > 800) {
                riskText = "ALTO RIESGO";
            }

            const activos = causas.filter((c) => c.estado === "Activo").length;
            const concluidos = causas.filter((c) => c.estado === "Concluido").length;
            const fallidos = causas.filter((c) => c.estado === "Fallido").length;

            return (
                <div className="max-w-4xl mx-auto space-y-8">
                    {/* Primera página */}
                    <div className="bg-white shadow-2xl border-0 overflow-hidden rounded-lg" id="certificate">
                        {/* Header azul */}
                        <div className="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 relative">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center">
                                    <div className="text-2xl font-bold flex items-center">
                                        Pro<span className="inline-block w-3 h-3 bg-orange-500 rounded-full mx-1"></span>erify
                                    </div>
                                </div>
                                <div className="text-right">
                                    <p className="text-blue-100 text-sm">Certificado de Litigios</p>
                                    <p className="text-xs text-blue-200">Documento Oficial</p>
                                </div>
                            </div>
                        </div>

                        <div className="p-8 space-y-8">
                            {/* Datos personales con indicador de riesgo */}
                            <div className="flex justify-between items-start">
                                <div className="flex-1">
                                    <h2 className="text-xl font-bold text-gray-800 mb-4">Datos del Solicitante</h2>
                                    <div className="space-y-2">
                                        <div>
                                            <span className="font-semibold text-gray-700">Nombre:</span>
                                            <p className="text-gray-900 font-medium">{personaData.nombre}</p>
                                        </div>
                                        <div>
                                            <span className="font-semibold text-gray-700">RUT:</span>
                                            <p className="text-gray-900 font-medium">{personaData.rut}</p>
                                        </div>
                                        <div>
                                            <span className="font-semibold text-gray-700">Edad:</span>
                                            <p className="text-gray-900 font-medium">{personaData.edad}</p>
                                        </div>
                                        <div>
                                            <span className="font-semibold text-gray-700">Fecha de emisión:</span>
                                            <p className="text-gray-900 font-medium">{personaData.fecha}</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Indicador de Riesgo */}
                                <div className="ml-8">
                                    <div className="bg-blue-50 border-2 border-blue-200 rounded-full px-8 py-6 text-center shadow-lg">
                                        <h3 className="text-sm font-bold text-blue-700 mb-2">INDICADOR DE RIESGO</h3>
                                        <div className="text-4xl font-bold text-blue-600 mb-1">{personaData.indicadorRiesgo}</div>
                                        <div className="text-xs font-semibold text-blue-600">{riskText}</div>
                                    </div>
                                </div>
                            </div>

                            {/* Sección Litigios */}
                            <div className="bg-blue-50 rounded-lg p-6">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-xl font-bold text-blue-800">Litigios</h2>
                                    <div className="text-sm text-blue-600">Se observaron un total de {causas.length} causas.</div>
                                </div>

                                <div className="grid grid-cols-4 gap-4 text-center">
                                    <div className="bg-white rounded-lg p-4 shadow-sm">
                                        <div className="text-2xl font-bold text-blue-600">{causas.length}</div>
                                        <div className="text-sm text-gray-600">Total</div>
                                    </div>
                                    <div className="bg-white rounded-lg p-4 shadow-sm">
                                        <div className="text-2xl font-bold text-green-600">{activos}</div>
                                        <div className="text-sm text-gray-600">Activos</div>
                                    </div>
                                    <div className="bg-white rounded-lg p-4 shadow-sm">
                                        <div className="text-2xl font-bold text-gray-600">{concluidos}</div>
                                        <div className="text-sm text-gray-600">Concluidos</div>
                                    </div>
                                    <div className="bg-white rounded-lg p-4 shadow-sm">
                                        <div className="text-2xl font-bold text-red-600">{fallidos}</div>
                                        <div className="text-sm text-gray-600">Fallidos</div>
                                    </div>
                                </div>
                            </div>

                            {/* Sección Detalle */}
                            <div className="bg-blue-50 rounded-lg p-6">
                                <h2 className="text-xl font-bold text-blue-800 mb-6">Detalle</h2>

                                {/* Primera tabla */}
                                <div className="mb-8 bg-white rounded-lg overflow-hidden shadow-sm">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="bg-blue-100">
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">ID</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Tipo</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Estado</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Inicio del Procedimiento</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Tribunal</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {causas.map((causa, index) => (
                                                <tr key={causa.id} className={index % 2 === 0 ? "bg-blue-25" : "bg-white"}>
                                                    <td className="p-4 border-b border-gray-100">{causa.id}</td>
                                                    <td className="p-4 border-b border-gray-100">{causa.tipo}</td>
                                                    <td className="p-4 border-b border-gray-100">
                                                        <Badge
                                                            variant={
                                                                causa.estado === "Activo"
                                                                    ? "default"
                                                                    : causa.estado === "Fallido"
                                                                        ? "destructive"
                                                                        : "secondary"
                                                            }
                                                            className="text-xs"
                                                        >
                                                            {causa.estado}
                                                        </Badge>
                                                    </td>
                                                    <td className="p-4 border-b border-gray-100 text-sm">{causa.inicio}</td>
                                                    <td className="p-4 border-b border-gray-100 text-sm">{causa.tribunal}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>

                                {/* Segunda tabla */}
                                <div className="bg-white rounded-lg overflow-hidden shadow-sm">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="bg-blue-100">
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">ID</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Materia</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Demandado</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Segundo Demandado</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Cuantía</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {causas.map((causa, index) => (
                                                <tr key={causa.id} className={index % 2 === 0 ? "bg-blue-25" : "bg-white"}>
                                                    <td className="p-4 border-b border-gray-100">{causa.id}</td>
                                                    <td className="p-4 border-b border-gray-100 text-sm">{causa.materia}</td>
                                                    <td className="p-4 border-b border-gray-100 text-sm">{causa.demandado}</td>
                                                    <td className="p-4 border-b border-gray-100 text-sm">{causa.segundoDemandado}</td>
                                                    <td className="p-4 border-b border-gray-100">
                                                        <Badge
                                                            variant={
                                                                causa.cuantia === "Alta"
                                                                    ? "destructive"
                                                                    : causa.cuantia === "Media"
                                                                        ? "default"
                                                                        : "secondary"
                                                            }
                                                            className="text-xs"
                                                        >
                                                            {causa.cuantia}
                                                        </Badge>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Footer con disclaimers */}
                            <div className="bg-gray-100 rounded-lg p-6 text-center">
                                <div className="space-y-3 text-sm text-gray-600">
                                    <p>
                                        El presente certificado no contiene información respecto de aquellas causas que se encuentran reservadas
                                        de acuerdo con el Acta N°44-2022 de la Corte Suprema y Ley 20.866.
                                    </p>
                                    <p>
                                        El presente certificado solo contiene información respecto de aquellas causas visibles en la oficina
                                        judicial virtual.
                                    </p>
                                </div>
                                <div className="mt-4 pt-4 border-t border-gray-300">
                                    <p className="text-xs text-gray-500">ProVerify Certificados | Documento generado automáticamente</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Segunda página */}
                    <div className="bg-white shadow-2xl border-0 overflow-hidden rounded-lg">
                        {/* Header de segunda página */}
                        <div className="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center">
                                    <div className="text-xl font-bold flex items-center">
                                        Pro<span className="inline-block w-2 h-2 bg-orange-500 rounded-full mx-1"></span>erify
                                    </div>
                                </div>
                                <span className="text-sm text-blue-200">Página 2</span>
                            </div>
                        </div>

                        <div className="p-8 space-y-8">
                            {/* Tercera tabla */}
                            <div className="bg-blue-50 rounded-lg p-6">
                                <h2 className="text-xl font-bold text-blue-800 mb-6">Detalle de Relaciones Laborales</h2>

                                <div className="bg-white rounded-lg overflow-hidden shadow-sm">
                                    <table className="w-full">
                                        <thead>
                                            <tr className="bg-blue-100">
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">ID</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">ROL</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Inicio/Termino de Relación Laboral</th>
                                                <th className="p-4 text-left font-semibold text-blue-800 border-b border-blue-200">Fallo</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {causas.map((causa, index) => (
                                                <tr key={causa.id} className={index % 2 === 0 ? "bg-blue-25" : "bg-white"}>
                                                    <td className="p-4 border-b border-gray-100">{causa.id}</td>
                                                    <td className="p-4 border-b border-gray-100">{causa.rol}</td>
                                                    <td className="p-4 border-b border-gray-100">{causa.relacionLaboral}</td>
                                                    <td className="p-4 border-b border-gray-100">
                                                        <Badge variant={causa.fallo === "Acogida" ? "default" : "secondary"} className="text-xs">
                                                            {causa.fallo}
                                                        </Badge>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Leyenda */}
                            <div className="bg-blue-50 rounded-lg p-6">
                                <h2 className="text-xl font-bold text-blue-800 mb-6">Descripción y Leyenda</h2>

                                <div className="bg-white rounded-lg p-6 space-y-4">
                                    <div>
                                        <h3 className="font-bold text-gray-800 mb-3">Leyenda:</h3>
                                        <div className="space-y-3 text-sm text-gray-700">
                                            <p>
                                                <strong>ID:</strong> Número de identificación de cada causa, correlativo a las demás tablas.
                                            </p>
                                            <p>
                                                <strong>Estado:</strong> Representa el estado de tramitación de la causa.
                                            </p>
                                            <p className="ml-6">
                                                <strong>Fallido:</strong> Representa un termino distinto a una sentencia definitiva, transacción,
                                                conciliación o avenimiento.
                                            </p>
                                            <p>
                                                <strong>Clasificación de Cuantía:</strong> Determinación de lo solicitado por postulante en base a
                                                escala propia creada por "ProVerify".
                                            </p>
                                            <div className="ml-6 space-y-2">
                                                <div className="flex items-center gap-3">
                                                    <div className="w-4 h-4 bg-green-500 rounded-full"></div>
                                                    <span>
                                                        <strong>Baja Cuantía:</strong> En un rango de $0 a $5.000.000
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <div className="w-4 h-4 bg-yellow-500 rounded-full"></div>
                                                    <span>
                                                        <strong>Media Cuantía:</strong> En un rango de $5.000.000 a $15.000.001
                                                    </span>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <div className="w-4 h-4 bg-red-500 rounded-full"></div>
                                                    <span>
                                                        <strong>Cuantía Alta:</strong> Sobre los $15.000.001
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Componente principal
        function App() {
            const [personaData, setPersonaData] = useState({
                nombre: "PAULO ANDRES DIAZ RAYGADA",
                rut: "19.149.605-1",
                edad: "29 años",
                indicadorRiesgo: "999",
                fecha: new Date().toLocaleDateString("es-CL", {
                    day: "2-digit",
                    month: "2-digit",
                    year: "numeric",
                    hour: "2-digit",
                    minute: "2-digit",
                }),
            });

            const [causas, setCausas] = useState([
                {
                    id: 1,
                    tipo: "Laboral",
                    estado: "Activo",
                    inicio: "23 de septiembre de 2024",
                    tribunal: "Juzgado de Letras del Trabajo de Arica",
                    materia: "Despido Indirecto",
                    demandado: "Alimentos S.A.",
                    segundoDemandado: "Transportes LTDA",
                    cuantia: "Media",
                    rol: "O-100-2023",
                    relacionLaboral: "01/01/2020 – 08/12/2022",
                    fallo: "Acogida",
                },
                {
                    id: 2,
                    tipo: "Laboral",
                    estado: "Concluido",
                    inicio: "11 de julio de 2020",
                    tribunal: "1° Juzgado de Letras del Trabajo de Vallenar",
                    materia: "Indemnización Sustitutiva de Aviso Previo",
                    demandado: "Transportes S.P.A.",
                    segundoDemandado: "N/A",
                    cuantia: "Baja",
                    rol: "M-245-2024",
                    relacionLaboral: "05/09/2023 – 10/11/2024",
                    fallo: "Rechazada",
                },
                {
                    id: 3,
                    tipo: "Laboral",
                    estado: "Fallido",
                    inicio: "7 de marzo de 2022",
                    tribunal: "1° Juzgado de Letras del Trabajo de Santiago",
                    materia: "Despido Injustificado",
                    demandado: "Minera S.A.",
                    segundoDemandado: "Contratistas EIRL",
                    cuantia: "Alta",
                    rol: "T-1550-2025",
                    relacionLaboral: "20/12/2024 – 03/05/2025",
                    fallo: "Rechazada",
                },
            ]);

            const [showPreview, setShowPreview] = useState(false);

            const addCausa = () => {
                const newId = Math.max(...causas.map((c) => c.id)) + 1;
                setCausas([
                    ...causas,
                    {
                        id: newId,
                        tipo: "Laboral",
                        estado: "Activo",
                        inicio: "",
                        tribunal: "",
                        materia: "",
                        demandado: "",
                        segundoDemandado: "",
                        cuantia: "Baja",
                        rol: "",
                        relacionLaboral: "",
                        fallo: "",
                    },
                ]);
            };

            const removeCausa = (id) => {
                setCausas(causas.filter((c) => c.id !== id));
            };

            const updateCausa = (id, field, value) => {
                setCausas(causas.map((c) => (c.id === id ? { ...c, [field]: value } : c)));
            };

            const handleGeneratePDF = () => {
                generatePDF(personaData, causas);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
                    <div className="container mx-auto px-4 py-8">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <div className="flex items-center justify-center gap-3 mb-4">
                                <div className="p-3 bg-blue-600 rounded-xl">
                                    <FileTextIcon />
                                </div>
                                <h1 className="text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                                    ProVerify Certificados
                                </h1>
                            </div>
                            <p className="text-lg text-gray-600 max-w-2xl mx-auto">
                                Generador profesional de certificados de litigios laborales para empresas
                            </p>
                        </div>

                        {!showPreview ? (
                            <div className="grid gap-8">
                                {/* Datos Personales */}
                                <div className="shadow-lg border-0 bg-white/80 backdrop-blur rounded-lg overflow-hidden">
                                    <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
                                        <h2 className="text-xl font-bold flex items-center gap-2">
                                            <FileTextIcon />
                                            Datos Personales
                                        </h2>
                                    </div>
                                    <div className="p-6 space-y-4">
                                        <div className="grid md:grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Nombre Completo</label>
                                                <input
                                                    type="text"
                                                    value={personaData.nombre}
                                                    onChange={(e) => setPersonaData({ ...personaData, nombre: e.target.value })}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">RUT</label>
                                                <input
                                                    type="text"
                                                    value={personaData.rut}
                                                    onChange={(e) => setPersonaData({ ...personaData, rut: e.target.value })}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Edad</label>
                                                <input
                                                    type="text"
                                                    value={personaData.edad}
                                                    onChange={(e) => setPersonaData({ ...personaData, edad: e.target.value })}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-1">Indicador de Riesgo</label>
                                                <input
                                                    type="text"
                                                    value={personaData.indicadorRiesgo}
                                                    onChange={(e) => setPersonaData({ ...personaData, indicadorRiesgo: e.target.value })}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                {/* Causas */}
                                <div className="shadow-lg border-0 bg-white/80 backdrop-blur rounded-lg overflow-hidden">
                                    <div className="bg-gradient-to-r from-purple-600 to-pink-600 text-white p-6">
                                        <div className="flex items-center justify-between">
                                            <h2 className="text-xl font-bold flex items-center gap-2">
                                                <FileTextIcon />
                                                Causas Laborales ({causas.length})
                                            </h2>
                                            <button
                                                onClick={addCausa}
                                                className="bg-white/20 hover:bg-white/30 text-white border border-white/30 px-4 py-2 rounded-lg flex items-center gap-2"
                                            >
                                                <PlusIcon />
                                                Agregar Causa
                                            </button>
                                        </div>
                                    </div>
                                    <div className="p-6">
                                        <div className="space-y-6">
                                            {causas.map((causa) => (
                                                <div key={causa.id} className="p-4 border rounded-lg bg-gray-50/50 relative">
                                                    <div className="flex justify-between items-start mb-4">
                                                        <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200">
                                                            Causa #{causa.id}
                                                        </Badge>
                                                        <button
                                                            onClick={() => removeCausa(causa.id)}
                                                            className="text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded"
                                                        >
                                                            <Trash2Icon />
                                                        </button>
                                                    </div>

                                                    <div className="grid md:grid-cols-3 gap-4">
                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Tipo</label>
                                                            <select
                                                                value={causa.tipo}
                                                                onChange={(e) => updateCausa(causa.id, "tipo", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                            >
                                                                <option value="Laboral">Laboral</option>
                                                                <option value="Civil">Civil</option>
                                                                <option value="Comercial">Comercial</option>
                                                            </select>
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Estado</label>
                                                            <select
                                                                value={causa.estado}
                                                                onChange={(e) => updateCausa(causa.id, "estado", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                            >
                                                                <option value="Activo">Activo</option>
                                                                <option value="Concluido">Concluido</option>
                                                                <option value="Fallido">Fallido</option>
                                                            </select>
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Cuantía</label>
                                                            <select
                                                                value={causa.cuantia}
                                                                onChange={(e) => updateCausa(causa.id, "cuantia", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                            >
                                                                <option value="Baja">Baja</option>
                                                                <option value="Media">Media</option>
                                                                <option value="Alta">Alta</option>
                                                            </select>
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Inicio del Procedimiento</label>
                                                            <input
                                                                type="text"
                                                                value={causa.inicio}
                                                                onChange={(e) => updateCausa(causa.id, "inicio", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: 23 de septiembre de 2024"
                                                            />
                                                        </div>

                                                        <div className="md:col-span-2">
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Tribunal</label>
                                                            <input
                                                                type="text"
                                                                value={causa.tribunal}
                                                                onChange={(e) => updateCausa(causa.id, "tribunal", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: Juzgado de Letras del Trabajo de Arica"
                                                            />
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Materia</label>
                                                            <input
                                                                type="text"
                                                                value={causa.materia}
                                                                onChange={(e) => updateCausa(causa.id, "materia", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: Despido Indirecto"
                                                            />
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Demandado</label>
                                                            <input
                                                                type="text"
                                                                value={causa.demandado}
                                                                onChange={(e) => updateCausa(causa.id, "demandado", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: Alimentos S.A."
                                                            />
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Segundo Demandado</label>
                                                            <input
                                                                type="text"
                                                                value={causa.segundoDemandado}
                                                                onChange={(e) => updateCausa(causa.id, "segundoDemandado", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: Transportes LTDA o N/A"
                                                            />
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">ROL</label>
                                                            <input
                                                                type="text"
                                                                value={causa.rol}
                                                                onChange={(e) => updateCausa(causa.id, "rol", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: O-100-2023"
                                                            />
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Relación Laboral</label>
                                                            <input
                                                                type="text"
                                                                value={causa.relacionLaboral}
                                                                onChange={(e) => updateCausa(causa.id, "relacionLaboral", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                                placeholder="ej: 01/01/2020 – 08/12/2022"
                                                            />
                                                        </div>

                                                        <div>
                                                            <label className="block text-sm font-medium text-gray-700 mb-1">Fallo</label>
                                                            <select
                                                                value={causa.fallo}
                                                                onChange={(e) => updateCausa(causa.id, "fallo", e.target.value)}
                                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                            >
                                                                <option value="Acogida">Acogida</option>
                                                                <option value="Rechazada">Rechazada</option>
                                                                <option value="Pendiente">Pendiente</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>

                                {/* Botones de Acción */}
                                <div className="flex gap-4 justify-center">
                                    <button
                                        onClick={() => setShowPreview(true)}
                                        className="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 text-lg rounded-lg flex items-center gap-2"
                                    >
                                        <EyeIcon />
                                        Vista Previa
                                    </button>
                                    <button
                                        onClick={handleGeneratePDF}
                                        className="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3 text-lg rounded-lg flex items-center gap-2"
                                    >
                                        <DownloadIcon />
                                        Generar PDF
                                    </button>
                                </div>
                            </div>
                        ) : (
                            <div>
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold text-gray-800">Vista Previa del Certificado</h2>
                                    <div className="flex gap-2">
                                        <button 
                                            onClick={() => setShowPreview(false)} 
                                            className="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600"
                                        >
                                            Volver a Editar
                                        </button>
                                        <button
                                            onClick={handleGeneratePDF}
                                            className="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-4 py-2 rounded-lg flex items-center gap-2"
                                        >
                                            <DownloadIcon />
                                            Descargar PDF
                                        </button>
                                    </div>
                                </div>
                                <CertificatePreview personaData={personaData} causas={causas} />
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Renderizar la aplicación
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
